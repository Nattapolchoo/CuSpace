{% extends "base.html" %}
{% block title %}{% endblock %}
{% block head %}
    {{ super() }}
          <style>



        .jumbotron {
{#        background-image: url("/static/img/job.jpg");#}
        background: linear-gradient( rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) ), url('/static/img/tutor.jpg');
        color: white;
    }
        .col-sm-4{
          margin-bottom: 5px;
        }

        .col-md-10{
            margin-left: 10%;
        }

        #activitiesimgcontainer{
          margin-left: 15px;
        }

        .text-block {
            position: absolute;
            top: 50%;
            left: 50%;
            background-color: black;
            color: white;
            {#opacity: 1;#}
        }

            .btn-secondary{
        background-color: #6c757d;
        color: white;
        position: absolute;
        bottom: 0;

    }
    .btn-secondary:hover{
        background-color: #5a6268;
        color: white;
    }
    .search-container {
        float: left;
        margin-top: 16px;
        color: black;
    }
    .search-container input[type=text] {
        padding: 6px;
        margin-top: 8px;
        font-size: 17px;
        border: none;
    }
    .search-container button {
        float: right;
        padding: 6px 10px;
        margin-top: 8px;
        margin-right: 16px;
        background: #ddd;
        font-size: 17px;
        border: none;
        cursor: pointer;
}

.search-container button:hover {
  background: #ccc;
}


        .col-sm-2{
            width: 170px;
        }

        .facultytext {
            position: inherit;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5em;
            font-family: "Helvetica Neue";
            color: white;
            white-space:nowrap;
        }


        .facultytext span{
           color: white;
           letter-spacing: -1px;
           background: rgb(0,0,0); /* fallback color */
           background: rgba(0,0,0, 0.7);
           padding: 10px;
            opacity: 1;
            border-radius: 25px;
             -webkit-transition: .3s linear;
            transition: .3s linear;

        }

        .facultytext:hover span{
           color: black;
           letter-spacing: -1px;
           background: rgb(0,0,0);
           background: rgba(255, 204, 0, 1);
           padding: 10px;
            opacity: 1;
            border-radius: 25px;
             -webkit-transition: .3s linear;
            transition: .3s linear;

        }


        #firstcol{
          margin-right:  240px;
        }

        .activitiestext {
            position: absolute;
            top: 50%;
            left: 42%;
            font-size: 2.5em;
            font-family: "Helvetica Neue";
            {#opacity: 0.5;#}
            color: white;
            white-space:nowrap;
        }


        .activitiestext span{
           color: white;
           letter-spacing: -1px;
           background: rgb(0,0,0); /* fallback color */
           background: rgba(0,0,0, 0.7);
           padding: 10px;
            opacity: 1;
            border-radius: 25px;
             -webkit-transition: .3s linear;
            transition: .3s linear;

        }

        .activitiestext:hover span{
           color: black;
           letter-spacing: -1px;
           background: rgb(0,0,0); /* fallback color */
           background: rgba(255, 204, 0, 1);
           padding: 10px;
            opacity: 1;
            border-radius: 25px;
             -webkit-transition: .3s linear;
            transition: .3s linear;

        }


        .btnn {
            background-color: cornflowerblue;
            color: #ffffff;
            border: none;
            width: 40%
        }


        h1 {
            font-size: 20px;
            font-family: Helvetica Neue;
        }




        .btn.btn-secondary.dropdown-toggle {
            border-radius: 0;

        }

          .container{
              padding-top: 0px;
          }

          .bootstrap-select:not([class*=col-]):not([class*=form-control]):not(.input-group-btn){
              width:100px;
          }

      </style>
{% endblock %}
{% block content %}

    <body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">

<div class="jumbotron">
        <div class="container">
          <h1 class="display-3">Post a discussion</h1>
          <p>Let's Communicate and share.</p>

        </div>
      </div>
<div class="container wrap">
    <!-- Content here -->
    <form method="POST" enctype=multipart/form-data  id="submitTutor" onsubmit="return checkallpost()" action="{{ url_for("create_tutor") }}">
        {#         add form here#}
        <div class="row">
            <div class="col-md-6">

{#                <br>#}
{#                <h2>Post a discussion</h2>#}
{#                <br>#}
                <p>Upload Images(Maximum of 6 images)</p>
                <br>
                <img id="img0" src="#" alt="" style="display: none"/>
                <img id="img1" src="#" alt="" style="display: none"/>
                <img id="img2" src="#" alt="" style="display: none"/>
                <img id="img3" src="#" alt="" style="display: none"/>
                <img id="img4" src="#" alt="" style="display: none"/>
                <img id="img5" src="#" alt="" style="display: none"/>
                <button id="b1" onclick="btnClick()" type="button" class="btn btn-secondary btn-lg">+</button>
                <input id="input-image-3" name="input-image" type="file" class="btn btn-secondary btn-lg" onchange="readURL(this) ;" accept="image/*"
                       multiple style="display: none">
                <br>


            </div>
            <div class="col-md-6">

                <label for="bio">Enter your Bio</label>
                <textarea form="submitTutor" class="form-control" rows="5" id="bio" name="bio" placeholder="Write something about yourself..."></textarea>
                <div id="posstatus">

                </div>
                <br>

                <label for="coursecategory">Choose your open course category</label>
                <label>Multiple fields contact form</label>
                    <div class="course">
                        <label>Open Courses:</label>
                            <div class="form-group multiple-form-group input-group course " required/>
                                <div class="input-group-btn input-group-select " required/>
                             <select class="form-control required" type="button" data-toggle="dropdown" title="Category" name="category_name"  style="width:120px" id="coursecat" required/>
                             <option value="" selected disabled>Please select</option>
                                {% for category in cat %}
                                <option value="{{ category[0] }}" id="coursecat">{{ category[1] }}</option>
                                {% endfor %}
                            </select>
                                    <input type="hidden" class="input-group-select-val " >
                                </div>
                                <input type="text" name="contacts['value'][]" class="form-control " id="course" style="width: 300px;" placeholder="Course" required/>
                                <input type="number" namec="contacts['value'][]" class="form-control " id="courseprice" style="width:100px;" placeholder="Price/hr" required/>

                            </div>
                        </div>
                        <a class="addcourse" href="#">Add further course</a>


<script>
    var cloneIndex = $(".course").length;
    $('.addcourse').on('click', function(e) {
      e.preventDefault();
      console.log('hi');
      $('.course').first().clone()
          .find("input")
        .attr("id", "courseprice" +  cloneIndex)
        .val('').end()
        .find("input:text")
        .attr("id", "course" +  cloneIndex)
        .val('').end()
        .find("select")
        .attr("id", "coursecat" +  cloneIndex)
        .val('').end().insertBefore(this);
        cloneIndex++;
    });

function checkallpost() {
    console.log('hi');
    var posvalue = $('#bio').val();
    var post1value = $('#post1').val();
    var detailvalue = $('#detail').val();
    var $fileUpload = $("#input-image-3");
    if (parseInt($fileUpload.get(0).files.length) > 6) {
        alert("Can upload a maximum of 6 images");
        return false;
    }

    if (checkpos(posvalue) == 1 ||
        checkpost1(post1value) == 1 ||
        checkdetail(detailvalue) == 1 ||
        checkallform(categoryvalue) == 1
         ) {
        alert("Please enter all of the information");
        return false;
    } else {
        return true;
    }
}

function checkallform() {
        var coursecategory = 'category';
        var cprice = 'courseprice';
        var ccourse = 'course';
        var myData = {};
        var myData2 = {};
        var myData3 = {};
        var str1 = "$('#";
        var str2 = ".form-control')";
        var str3 = "')";
        var dt = [];
        var dt2 = [];
        var dt3 = [];

        for (i = 1; i < cloneIndex; i++) {
            coursecategory = coursecategory + i;
            var coursecat = str1.concat(coursecategory);

            coursecat = coursecat.concat(str3);
            coursecat = coursecat.concat('.val()');
            var theInstructions = coursecat;
            var F=new Function (theInstructions);
            // return();
            console.log('hi');
            coursecatvalue = F();
            console.log(coursecatvalue);
            myData[i] = coursecatvalue;
            if (coursecatvalue === "Course Category") {
                document.getElementById('categorystatus').style.color = "red";
                document.getElementById('categorystatus').innerHTML = 'X Please enter all of the category';
                dt[i] = 1;
            } else {
                document.getElementById('categorystatus').innerHTML = '';
                dt[i] = 0;
            }

            // ccourse= ccourse+i;
            // var course = str1.concat(course);
            // course = course.concat(str2);
            // coursevalue = course.val();
            // myData2[i] = coursevalue;
            // if (coursevalue === "") {
            //     document.getElementById('otherstatus').style.color = "red";
            //     document.getElementById('otherstatus').innerHTML = 'X Please enter all of the course';
            //     dt2[i] = 1;
            // } else {
            //     document.getElementById('otherstatus').innerHTML = '';
            //     dt2[i] = 0;
            // }
            //
            // cprice= cprice+i;
            // var price = str1.concat(price);
            // courseprice = price.concat(str2);
            // courspricevalue = courseprice.val();
            // myData3[i] = courspricevalue;
            // dt3[i]=checkpost1(courspricevalue);
        }
        return allfor(myData,myData2,myData3);
    }

function allfor(value,value2,value3){
        for (i = 0; i < cloneIndex; i++){
            if(value[i] === 1 || value2[i] ===1 || value3[i]===1){
            return 1;
            }else{
                return 0;
            }
        }

    }

function checkpos(value) {
    document.getElementById('posstatus').style.color = "red";
    if (value.length <= 1) {
        console.log('hi');
        document.getElementById('posstatus').innerHTML = 'X Please enter your bio';
        return 1;
    } else {
        document.getElementById('posstatus').innerHTML = '';
        return 0;
    }
}
function checkdetail(value) {
    document.getElementById('detailstatus').style.color = "red";
    if (value.length <= 1) {
        document.getElementById('detailstatus').innerHTML = 'X Please enter the video link';
        return 1;
    } else {
        document.getElementById('detailstatus').innerHTML = '';
        return 0;
    }
}
function checkpost1(value) {
    document.getElementById('post1status').style.color = "red";
    if (value.length == 0) {
        document.getElementById('post1status').innerHTML = 'X Pleas enter the price';
        return 1
    }
    if (value < 0) {
        document.getElementById('post1status').innerHTML = 'X Value of the price must be more than zero';
        return 1
    } else {
        document.getElementById('post1status').innerHTML = '';
        return 0
    }
}
$('#myModal').on('shown.bs.modal', function () {
    $('#myInput').focus()
})
function readURL(input) {
    document.getElementById("img0").style.display = "none";
    document.getElementById("img1").style.display = "none";
    document.getElementById("img2").style.display = "none";
    document.getElementById("img3").style.display = "none";
    document.getElementById("img4").style.display = "none";
    document.getElementById("img5").style.display = "none";
    if (input.files.length > 6) {
        alert("Can upload a maximum of 6 images");
    } else {
        if (input.files[0]) {
            for (i = 0; i < input.files.length; i++)
                showImage(input, i);
            document.getElementById("b1").innerHTML = "Change picture";
        }
    }
}
function showImage(input, n) {
    var reader = new FileReader();
    var str = '#img' + n;

    reader.onload = function (e) {
        $(str)
            .attr('src', e.target.result)
            .width(100)
            .height(100);
    };

    reader.readAsDataURL(input.files[n]);
    $(str).show();
}


</script>
                <div id="categorystatus">
                </div>
                <div id="othersstatus">
                </div>

                <br>
                <label for="post">Enter your youtube video self-introduction</label>
                <input type="text" class="form-control" id="detail" name="link">
                <input type="hidden" name="status">

                <div id="detailstatus">
                </div>

                <br>
                <label for="post">Enter your teaching price</label>
                <input type="number" class="form-control" id="post1" placeholder="xxxx Baht" name="price" min="0">

                <div id="post1status">
                </div>


                <br>
                <input id="finalbutton" type="submit" class="btn btn-primary" value="Create a discussion"></input>
            </div>
        </div>
    </form>

</div>
<script src="/static/js/verificationNewTutor.js"></script>
<script src="/static/js/registration.js"></script>
<script type="text/javascript">
               $(document).ready(function() {
               $('.selectpicker').selectpicker();
              });
</script>

    </body>


{% endblock %}