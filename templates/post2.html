{% extends "base.html" %}
{% block title %}Discussion - {% endblock %}
{% block head %}
    {{ super() }}
    {#    Put additional head code here #}
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,400italic,300italic,300,500italic,700,700italic,900,900italic'
          rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link id="theme-style" rel="stylesheet" href="/static/css/post/styles2.css">
{% endblock %}
{% block content %}
    <div class="top-bar">
        <div class="top-title">
            <i class="fas fa-briefcase" style="font-size: 35px;"></i><br>
            <a type="button" id="catBtn" class="dropdown">Category <span
                    style="position: absolute; padding-left: 5px;"><i class="fas fa-caret-down" id="catBtn"></i></span></a>
            <div id="myDropdown" class="dropdown-content" align="center">
                <a href="#">Engineer</a>
                <a href="#">Arts</a>
                <a href="#">Science</a>
            </div>
        </div>
    </div>
    <div class="container-body">

        <div class="wrapper">
            <div class="main-wrapper">
                <h2 class="section-title">{{ topic[0] }}</h2>
                <hr>
                <div class="post">
                    <div class="profile2">
                        <div class="profile-img">
                            <a href="#">{# url to user page #}
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="vote">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-up">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="fas fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-down">
                            <a href="#" class="down"><span class="fas fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                    </div>
                    <div class="profile-hover">
                        <div class="profile-img">
                            <a href="#">
                                <h5 style="font-weight: 500">{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6 style="font-size: 11px">Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>
                    </div>
                    <div class="content">{{ topic[1]|safe }}</div>
                    <div class="profile">
                        <div class="vote">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-up">
                            <div><a href="#" class="up"><span class="fas fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-down">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="fas fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="profile-img">
                            <a href="#">
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="poster-info">
                            <a href="#">
                                <h5>{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6>Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>

                    </div>
                </div>
                <div class="top-reply">
                    <h1>Top Reply</h1>
                </div>
                <hr>
            </div>

            {#            comment#}
            <div class="comment-wrapper">
                <div class="post">
                    <div class="profile2">
                        <div class="profile-img">
                            <a href="#">{# url to user page #}
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="vote">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-up">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="fas fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-down">
                            <a href="#" class="down"><span class="fas fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                    </div>
                    <div class="profile-hover">
                        <div class="profile-img">
                            <a href="#">
                                <h5 style="font-weight: 500">{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6 style="font-size: 11px">Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>
                    </div>
                    <div class="content">{{ topic[1]|safe }}</div>
                    <div class="profile">
                        <div class="vote">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-up">
                            <div><a href="#" class="up"><span class="fas fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-down">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="fas fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="profile-img">
                            <a href="#">
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="poster-info">
                            <a href="#">
                                <h5>{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6>Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>

                    </div>
                </div>
                <div class="top-reply">
                    <h1>2 Replies</h1>
                </div>
                <hr>
            </div>

            <div class="comment-wrapper">
                <div class="post">
                    <div class="profile2">
                        <div class="profile-img">
                            <a href="#">{# url to user page #}
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="vote">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-up">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="fas fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-down">
                            <a href="#" class="down"><span class="fas fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                    </div>
                    <div class="profile-hover">
                        <div class="profile-img">
                            <a href="#">
                                <h5 style="font-weight: 500">{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6 style="font-size: 11px">Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>
                    </div>
                    <div class="content">{{ topic[1]|safe }}</div>
                    <div class="profile">
                        <div class="vote">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-up">
                            <div><a href="#" class="up"><span class="fas fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-down">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="fas fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="profile-img">
                            <a href="#">
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="poster-info">
                            <a href="#">
                                <h5>{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6>Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>

                    </div>
                </div>
                <hr>
                <div class="post">
                    <div class="profile2">
                        <div class="profile-img">
                            <a href="#">{# url to user page #}
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="vote">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-up">
                            <a href="#" class="down"><span class="far fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="fas fa-thumbs-up"></span> </a>
                        </div>
                        <div class="vote-down">
                            <a href="#" class="down"><span class="fas fa-thumbs-down"></span> </a>
                            &nbsp;0&nbsp;
                            <a href="#" class="up"><span class="far fa-thumbs-up"></span> </a>
                        </div>
                    </div>
                    <div class="profile-hover">
                        <div class="profile-img">
                            <a href="#">
                                <h5 style="font-weight: 500">{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6 style="font-size: 11px">Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>
                    </div>
                    <div class="content">{{ topic[1]|safe }}</div>
                    <div class="profile">
                        <div class="vote">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-up">
                            <div><a href="#" class="up"><span class="fas fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="far fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="vote-down">
                            <div><a href="#" class="up"><span class="far fa-thumbs-up"></span></a></div>
                            <div>0</div>
                            <div><a href="#" class="down"><span class="fas fa-thumbs-down"></span></a>
                            </div>
                        </div>
                        <div class="profile-img">
                            <a href="#">
                                <img class="rounded-circle"
                                     src="/static/img/{{ topic[7] }}"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                        <div class="poster-info">
                            <a href="#">
                                <h5>{{ topic[4] }} {{ topic[5] }}</h5>
                            </a>
                            <h6>Posted on {{ topic[2].strftime('%H:%M %d-%m-%Y') }}</h6>
                        </div>

                    </div>
                </div>
                <hr>
                {#            Add comment    #}
                <div class="post">
                    <div class="profile2">
                        <div class="profile-img">
                            <a href="#">{# url to user page #}
                                {#                                Add User profile#}
                                <img class="rounded-circle"
                                     src="https://fireflysearch.co.nz/wp-content/uploads/2017/06/grey-circle-.png"
                                     alt="Generic placeholder image" width="45" height="45">
                            </a>
                        </div>
                    </div>
                    <form class="content add-comment">
                        <textarea class="form-control" rows="5" id="detail" name="content"></textarea>
                        <button class="btn btn-outline disabled" id="submitReply">Reply</button>
                        <div id="detailstatus" style="display: inline-block; padding-top: 3px; color: red">
                            &nbsp;
                        </div>
                    </form>
                </div>
            </div>
            <hr>
        </div>
    </div>
    </div>
    {#        <nav class="navPage">#}
    {#            <ul class="pagination">#}
    {#                <li class="page-item">#}
    {#                    <a class="page-link" href="#">Previous</a>#}
    {#                </li>#}
    {#                {% for page in range(numofPage) %}#}
    {#                    <li class="page-item">#}
    {#                        <a class="page-link"#}
    {#                           href="{{ url_for('discussion',category = cat, page = loop.index) }}">{{ loop.index }}</a>#}
    {#                    </li>#}
    {#                {% endfor %}#}
    {#                <li class="page-item">#}
    {#                    <a class="page-link" href="#">Next</a>#}
    {#                </li>#}
    {#            </ul>#}
    {#        </nav>#}
    </div>

    <script>
        $(document).ready(function () {
            $(".dropdown").click(function () {
                if ($("#myDropdown").css("display") == "none") {
                    console.log(0);
                    $("#myDropdown").show();
                } else {
                    $("#myDropdown").hide();
                    console.log(1);
                }
                console.log(3);
            });

            $("#catBtn").hover(function () {
                $("#catBtn").css('border-bottom', '4px solid');
                $("#catBtn").css('opacity', '0.9');

            }, function () {
                if ($('#myDropdown').css('display') == 'block') {
                    {#                    $("#catBtn").html('{{ cat }} <i class="fas fa-caret-down" id="dropdown-icon"></i>');#}
                } else {
                    $("#catBtn").css('border-bottom', '0px solid');
                    $("#catBtn").css('opacity', '1.0');

                }
            });
            $(window).click(function () {
                if ($('#myDropdown').css('display') == 'block') {
                    $("#catBtn").css('border-bottom', '4px solid');
                    $("#catBtn").css('opacity', '0.9');
                } else {
                    if ($("#catBtn").is(":hover")) {
                        $("#catBtn").css('border-bottom', '4px solid');
                        $("#catBtn").css('opacity', '0.9');
                    } else {
                        $("#catBtn").css('border-bottom', '0px solid');
                        $("#catBtn").css('opacity', '1.0');
                    }
                }
            });
            $(document).mouseup(function (e) {
                if (!($(".dropdown").is(e.target) || $("#dropIcon").is(e.target))) {
                    $("#myDropdown").hide();
                }

            });
        });
        $('.profile-img').hover(function () {
            $('.profile-hover').show();
        }, function () {
            $('.profile-hover').hide();
        });
        var editor = CKEDITOR.replace('detail', {
            uiColor: '#ffffff'
        });
        editor.on('change', function (evt) {
            // getData() returns CKEditor's HTML content.
            console.log('Total bytes: ' + evt.editor.getData().length);
            if (evt.editor.getData().length > 10000) {
                $("#detailstatus").html('Content is too long');
                $('#submitReply').removeClass('active').addClass('disabled');
            } else if (evt.editor.getData().length == 0) {
                $('#submitReply').removeClass('active').addClass('disabled');
            } else {
                $("#detailstatus").html('&nbsp;');
                $('#submitReply').removeClass('disabled')
            }
        });
    </script>
{% endblock %}