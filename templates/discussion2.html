{% extends "base.html" %}
{% block title %}Discussion - {% endblock %}
{% block head %}
    {{ super() }}
    {#    Put additional head code here #}
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,400italic,300italic,300,500italic,700,700italic,900,900italic'
          rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link id="theme-style" rel="stylesheet" href="/static/css/discussion/styles2.css">
{% endblock %}
{% block content %}
    {#    Put body code here #}
    <div class="top-bar" style="background-color: {{ catDetail[3] }}">
        <div class="top-title">
            <i class="{{ catDetail[2] }}" style="font-size: 35px;"></i><br>
            <a type="button" id="catBtn" class="dropdown">{{ cat }} <span style="position: absolute; padding-left: 5px;"><i class="fas fa-caret-down" id="catBtn"></i></span></a>
            <div id="myDropdown" class="dropdown-content" align="center">
                {% for categoryList in catList %}
                <a href="{{ url_for('discussion', category = categoryList[1], page = 1)}}">{{ categoryList[1] }}</a>
                {% endfor %}

            </div>
        </div>
    </div>
    <div class="container-body">

        <div class="wrapper">
            <div class="top-search-bar">
                <form class="form-inline" action="#">
                    <div class="form-group">
                        <a type="button" class="btn btn-outline" id="beatutor" href="/newpost" style="border-color: {{ catDetail[3] }}; color: {{ catDetail[3] }};">NEW DISCUSSION <i
                                class="fas fa-plus" style="font-size: 14px; padding-bottom: 1px"></i></a>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="SEARCH" name="search">
                        <button type="submit"><span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                        </button>
                    </div>
                    <hr>
                </form>
            </div>
        </div>
        <div class="wrapper">
            {% for data in discussion %}
                <div class="main-wrapper">
                    <div class="main-right">
                        <h6 class="section-title">
                            <i class="far fa-edit"></i> {{ comment[loop.index] }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <i class="far fa-clock"></i> {{ data[7].strftime('%H:%M %d-%m-%Y') }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <i class="fas fa-user"></i> {{ data[8] }} {{ data[9] }}
                        </h6>
                    </div>
                    <div class="main-left">
                        <div class="profile-img"><img class="rounded-circle"
                                                      src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="
                                                      alt="Generic placeholder image" width="45" height="45"></div>
                        <h4 class="section-title"><a href="/post">{{ data[5] }}</a></h4>
                        <h6 class="section-title">Ralph Kimball founded the Kimball Group. Since the mid-1980s, he has been the data warehouse and business
                intelligence industry’s thought leader on the dimen- sional approach. He has educated tens of thousands
                of IT professionals. The Toolkit books written by Ralph and his colleagues have been the industry’s best
                sellers since 1996. Prior to working at Metaphor and founding Red Brick Systems, Ralph coinvented the
                Star workstation, the first commercial product with windows, icons, and a mouse, at Xerox’s Palo Alto
                Research Center (PARC). Ralph has a PhD in electrical engineering from Stanford University.</h6>
                    </div>
                </div>
                <hr>
            {% endfor %}
        </div>
        <nav class="navPage">
            <ul class="pagination">
                <li class="page-item">
                    <a class="page-link" href="#">Previous</a>
                </li>
                {% for page in range(numofPage) %}
                    <li class="page-item">
                        <a class="page-link"
                           href="{{ url_for('discussion',category = cat, page = loop.index  ) }}">{{ loop.index }}</a>
                    </li>
                {% endfor %}
                <li class="page-item">
                    <a class="page-link" href="#">Next</a>
                </li>
            </ul>
        </nav>
    </div>

    <script>
        {#        /* When the user clicks on the button,#}
        {#         toggle between hiding and showing the dropdown content */#}
        {#        function myFunction() {#}
        {#            if (document.getElementById("myDropdown").style.display == "none") {#}
        {#                document.getElementById("myDropdown").style.display = "block";#}
        {#            } else {#}
        {#                document.getElementById("myDropdown").style.display = "none";#}
        {#            }#}
        {#        }#}
        // Close the dropdown if the user clicks outside of it
{#        window.onclick = function (event) {#}
{#            if (event.target.matches('.dropdown') || event.target.matches('#dropdown-icon')) {#}
{#                if (document.getElementById("myDropdown").style.display == "none") {#}
{#                    document.getElementById("myDropdown").style.display = "block";#}
{#                } else {#}
{#                    document.getElementById("myDropdown").style.display = "none";#}
{#                }#}
{#            } else {#}
{#                document.getElementById("myDropdown").style.display = "none";#}
{#                document.getElementById("catBtn").innerHTML = "{{ cat }}";#}
{#            }#}
{#        }#}
        $(document).ready(function () {
            $(".dropdown").click(function () {
                if ($("#myDropdown").css("display") == "none") {
                    console.log(0);
                    $("#myDropdown").show();
                } else {
                    $("#myDropdown").hide();
                    console.log(1);
                }
                console.log(3);
            });

            $("#catBtn").hover(function () {
                $("#catBtn").css('border-bottom', '4px solid');
                $("#catBtn").css('opacity', '0.9');

            }, function () {
                if ($('#myDropdown').css('display') == 'block') {
{#                    $("#catBtn").html('{{ cat }} <i class="fas fa-caret-down" id="dropdown-icon"></i>');#}
                } else {
                    $("#catBtn").css('border-bottom', '0px solid');
                    $("#catBtn").css('opacity', '1.0');

                }
            });
            $(window).click(function () {
                if ($('#myDropdown').css('display') == 'block') {
                    $("#catBtn").css('border-bottom', '4px solid');
                    $("#catBtn").css('opacity', '0.9');
                } else {
                    if ($("#catBtn").is(":hover")) {
                        $("#catBtn").css('border-bottom', '4px solid');
                        $("#catBtn").css('opacity', '0.9');
                    } else {
                        $("#catBtn").css('border-bottom', '0px solid');
                        $("#catBtn").css('opacity', '1.0');
                    }
                }
            });
            $(document).mouseup(function (e) {
                if (!($(".dropdown").is(e.target) || $("#dropIcon").is(e.target))) {
                    $("#myDropdown").hide();
                }

            });
        });
    </script>
{% endblock %}