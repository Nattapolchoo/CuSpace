{% extends "base.html" %}
{% block title %}{% endblock %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" xmlns="http://www.w3.org/1999/html">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css"/>

    <link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css"/>
{#    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>#}
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

    <script>
        $(document).ready(function () {
            var date_input = $('input[name="dateofbirth"]'); //our date input has the name "date"
            var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
            date_input.datepicker({
                format: 'dd-mm-yyyy',
                container: container,
                todayHighlight: true,
                autoclose: true,
            })
        });

    </script>


    <style>

        #datepicker{margin-left: 0px;}

        #signupbutton{
            margin-left: 5%;
        }

        #usernameloginstatus, #passwordloginstatus {
            margin-left: 5%;
        }

        .btn-success {
            margin-left: 5%;
        }

        .search-container input[type=text] {
            padding: 6px;
            margin-top: 8px;
            font-size: 17px;
            border: none;
        }

        .search-container button {
            float: right;
            padding: 6px 10px;
            margin-top: 8px;
            margin-right: 16px;
            background: #ddd;
            font-size: 17px;
            border: none;
            cursor: pointer;
        }

        .search-container button:hover {
            background: #ccc;
        }

        html, body, h1, h2, h3, h4, h5, h6 {
            font-family: "Roboto", sans-serif
        }

        .w3-text-teal, .w3-hover-text-teal:hover {
            color: #347aa9 !important;
        }

        .table-striped > tbody > tr:nth-child(2n+1) > td, .table-striped > tbody > tr:nth-child(2n+1) > th {
            background-color: white;
        }

        .button, html [type=button], [type=reset], [type=submit] {
            -webkit-appearance: none;

        }

        .form-control {
            display: inline;
            width: 100%;
            margin-left: 5%;
        }

        label {
            margin-left: 5%;
        }

        .modal-header, .close {
            background-color: #337ab7;
        }

        .modal-body {
            width: 90%;
        }

        #password, #firstname, #lastname, #phoneno, #email {
            margin-left: 0% !important;
        }


    </style>


{% endblock %}
{% block content %}




    <body class="w3-light-grey">

    <!-- Page Container -->
    <div class="w3-content w3-margin-top" style="max-width:1400px;">

        <!-- The Grid -->
        <div class="w3-row-padding">

            <!-- Left Column -->
            <div class="w3-third">

                <div class="w3-white w3-text-grey w3-card-4">
                    <div class="w3-display-container">
                        <img src="/static/img/user/{{ tutor[0] }}/{{ tutor[2] }}" style="width:100%; max-height: 500px;" alt="Avatar">
                        {% if user_id == tutor[0] %}
                        <div class="w3-display-bottomright w3-container w3-text-black">
                            <button style="margin-bottom: 10%;" class="btn btn-primary btn-md" data-title="Edit"
                                    data-toggle="modal"
                                    data-target="#editpicture"><span
                                    class="glyphicon glyphicon-pencil"></span>
                            </button>
                        </div>
                        {% endif %}
                    </div>
                    <div class="w3-container">

                        <p><i class="fa fa-user fa-fw w3-margin-right w3-large w3-text-teal"
                              style="margin-top: 5%; "></i><b>Name:</b> {{ tutor[3] }} {{ tutor[4] }}

                        </p>


                        <p style="margin-top: 5%;"><i
                                class="fa fa-user fa-fw w3-margin-right w3-large w3-text-teal"></i><b>Age:</b> {{ birthday }}

                        </p>
                        <p style="margin-top: 5%;"><i
                                class="fa fa-user fa-fw w3-margin-right w3-large w3-text-teal"></i><b>Email:</b> {{ tutor[11] }}

                        </p>
                        <p style="margin-top: 5%;"><i
                                class="fab fa-line fa-fw w3-margin-right w3-large w3-text-teal"></i><b>LINE
                            ID:</b> {{ tutor[7] }}

                        </p>
                        <p style="margin-top: 5%;"><i
                                class="fab fa-facebook-square fa-fw w3-margin-right w3-large w3-text-teal"></i><b>Facebook:</b> {{ tutor[8] }}

                        </p>
                        <p style="margin-top: 5%;">
                            <i class="fa fa-phone fa-fw w3-margin-right w3-large w3-text-teal"></i><b>Telephone:</b> {{ tutor[9] }}
                        </p>

                        <hr>
                        {% if user_id == tutor[0] %}
                        <button type="button" data-toggle="modal" data-title="Edit" class="btn btn-primary"
                                data-target="#editprofile" style="margin-bottom: 5%;">Edit Profile
                        </button>
                        {% endif %}

                    </div>
                </div>
                <br>

                <!-- End Left Column -->
            </div>

            <!-- Right Column -->
            <div class="w3-twothird">

                <div class="w3-container w3-card w3-white w3-margin-bottom">
                    <h2 class="w3-text-grey w3-padding-16"><i
                            class="fa fa-suitcase fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Open Courses
                    </h2>
                    <div class="table-responsive">


                        <table id="mytable" class="table table-bordred table-striped">

                            <thead>


                            <th>Course Name</th>
                            <th>Course Category</th>
                            <th>Price (Baht/Hr)</th>
                            {% if user_id == tutor[0] %}
                            <th>Edit</th>
                            <th>Delete</th>
                            {% endif %}
                            </thead>
                            <tbody>
                            {% for subject in subInfo %}
                                <tr>

                                    <td>{{ subject[2] }}</td>
                                    <td>{{ subject[0] }}</td>
                                    <td>{{ subject[1] }}</td>
                                    {% if user_id == tutor[0] %}
                                    <td>
                                        <p data-placement="top" data-toggle="tooltip" title="Edit">
                                            <button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#{{ subject[3] }}"><span
                                                    class="glyphicon glyphicon-pencil"></span>
                                            </button>
                                        </p>
                                    </td>
                                    <td>
                                        <p data-placement="top" data-toggle="tooltip" title="Delete">
                                            <button class="btn btn-danger btn-xs" data-title="Delete"
                                                    data-toggle="modal"
                                                    data-target="#delete{{ subject[3] }}"><span
                                                    class="glyphicon glyphicon-trash"></span>
                                            </button>
                                        </p>
                                    </td>
                                {% endif %}
                                </tr>

                                {# MODAL FOR UPDATE COURSE#}
                                <div class="modal fade" id="{{ subject[3] }}" tabindex="-1" role="dialog"
                                     aria-labelledby="edit"
                                     aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-hidden="true"><span
                                                        class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                                </button>
                                                <h4 class="modal-title custom_align" id="Heading">Edit your course
                                                    detail</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form class="form-horizontal" onsubmit="return checkcourseedit()"
                                                      method="POST"
                                                      action="{{ url_for('update_subject', tutor_id = tutor[0], subject_group_id = subject[3]) }}">
                                                    <div class="form-group">
                                                        <div>
                                                            <label>Course Name:</label><br>
                                                            <input class="form-control" id="coursename"
                                                                   name="{{ subject[3] }}" value="{{ subject[2] }}"
                                                                   type="text" placeholder="Course Name"
                                                                   required/>
                                                        </div>
                                                        <div id="coursenamestatus" style="margin-left: 5%; "></div>
                                                        <div>
                                                            <label>Course Category:</label><br>
                                                            <select class="form-control" id="coursecategory"
                                                                    name="{{ subject[3] }}" required/>
                                                            {% for subjectList in sub %}
                                                                {% if subjectList[1] ==  subject[0] %}
                                                                    <option value="{{ subjectList[0] }}"
                                                                            selected>{{ subjectList[1] }}</option>
                                                                {% else %}
                                                                    <option value="{{ subjectList[0] }}">{{ subjectList[1] }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                            </select>
                                                        </div>
                                                        <div id="coursecategorystatus" style="margin-left: 5%; "></div>
                                                        <div>
                                                            <label>Course Price:</label><br>
                                                            <input type="number" min="0" rows="2" class="form-control"
                                                                   id="courseprice" name="{{ subject[3] }}"
                                                                   placeholder="Price" value="{{ subject[1] }}"
                                                                   required/>
                                                        </div>
                                                        <div id="coursepricestatus" style="margin-left: 5%; "></div>

                                                    </div>

                                                    <button type="submit" class="btn btn-success"
                                                            style="margin-left: 5%;">Update
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>

                                {#    DELETE MODAL    #}
                                <div class="modal fade" id="delete{{ subject[3] }}" tabindex="-1" role="dialog"
                                     aria-labelledby="edit" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-hidden="true"><span
                                                        class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                                </button>
                                                <h4 class="modal-title custom_align" id="Heading">Delete this
                                                    course</h4>
                                            </div>
                                            <div class="modal-body">

                                                <div class="alert alert-danger"><span
                                                        class="glyphicon glyphicon-warning-sign"></span>
                                                    Are you sure you want to delete this course?
                                                </div>

                                            </div>
                                            <div class="modal-footer ">
                                                <a href="{{ url_for('delete_subject_course', tutor_id = tutor[0], subject_group_id = subject[3]) }}"
                                                   type="button" class="btn btn-success"><span
                                                        class="glyphicon glyphicon-ok-sign"></span> Yes

                                                </a>
                                                <button type="button" class="btn btn-danger" data-dismiss="modal"><span
                                                        class="glyphicon glyphicon-remove"></span> No
                                                </button>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>
                            {% endfor %}
                            </tbody>

                        </table>
                        {% if user_id == tutor[0] %}
                        <button type="button" data-toggle="modal" data-title="Edit" class="btn btn-primary"
                                data-target="#addcourse" style="margin-bottom: 2%; float:right; margin-right: 5%;">Add
                            course
                        </button>
                    {% endif %}
                    </div>
                </div>
                <br>


                <div class="w3-container w3-card w3-white">
                    <h2 class="w3-text-grey w3-padding-16"><i
                            class="fas fa-info fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Information
                    </h2>
                    {{ tutor[1] }}
                </div>

                <div class="w3-container w3-card w3-white" style="margin-top: 3%;">
                    <h2 class="w3-text-grey w3-padding-16"><i
                            class="fab fa-youtube fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Video Introduction
                    </h2>
                    <object style="width:100%;height:100%;height: 461.25px; float: none; clear: both; margin: 2px auto;"
                            data="{{ tutor[6] }}">
                    </object>
                </div>


                <div class="w3-container w3-card w3-white" style="margin-top: 3%;">
                    <h2 class="w3-text-grey w3-padding-16"><i
                            class="fas fa-comments fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Tutor Reviews
                    </h2>
                    <div class="panel-body">
                        <div><img class="circle img-thumbnail img-box" src="http://sintret.com/img/andy.jpg"
                                  alt="sintret"
                                  style="float: left; margin-right: 10px; margin-bottom: 20px;">

                            <h4>Raymond Dragon</h4>
                            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod
                                tincidunt
                                ut laoreet dolore magna aliquam erat volutpat.</p>
                            <small>
                                <i class="glyphicon glyphicon-time"></i> 16/7/2018 | 20:22
                            </small>
                            <hr>

                        </div>
                        <div><img class="circle img-thumbnail img-box" src="http://sintret.com/img/andy.jpg"
                                  alt="sintret"
                                  style="float: left; margin-right: 10px;">

                            <h4>Raymond Dragon</h4>
                            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod
                                tincidunt
                                ut laoreet dolore magna aliquam erat volutpat.</p>
                            <small>
                                <i class="glyphicon glyphicon-time"></i> 16/7/2018 | 20:22
                            </small>
                        </div>
                    </div>
                </div>
                <!-- End Right Column -->
            </div>

            {#   MODAL FOR ADD COURSE#}
            <div class="modal fade" id="addcourse" tabindex="-1" role="dialog" aria-labelledby="edit"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span
                                    class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                            <h4 class="modal-title custom_align" id="Heading">Add addtional course</h4>
                        </div>
                        <div class="modal-body">
                            <form class="form-horizontal" onsubmit="return checkaddcourse()" method="POST"
                                  action="{{ url_for('add_subject', tutor_id =tutor[0]) }}">
                                <div class="form-group">
                                    <div>
                                        <label for="addcoursename">Course Name:</label><br>
                                        <input class="form-control" id="addcoursename" type="text"
                                               placeholder="Course Name"
                                               name="newcoursename" required/>
                                    </div>
                                    <div id="addcoursenamestatus" style="margin-left: 5%; "></div>
                                    <div>
                                        <label for="addcoursecategory">Course Category:</label><br>
                                        <select class="form-control" id="addcoursecategory" name="addsubjectcategory"
                                                required/>
                                        <option value="" selected disabled hidden>Select your category</option>
                                        {% for subjectList in sub %}
                                            <option value="{{ subjectList[0] }}">{{ subjectList[1] }}</option>
                                        {% endfor %}
                                        </select>
                                    </div>
                                    <div id="addcoursecategorystatus" style="margin-left: 5%; "></div>
                                    <div>
                                        <label for="addcourseprice">Course Price:</label><br>
                                        <input type="number" min="0" rows="2" class="form-control" id="addcourseprice"
                                               name="addprice"
                                               placeholder="Price" required/>
                                    </div>
                                    <div id="addcoursepricestatus" style="margin-left: 5%; "></div>
                                </div>
                                <button type="submit" class="btn btn-success" style="margin-left: 2%;">Update
                                </button>
                            </form>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <div id="editprofile" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Edit your profile here</h4>
                        </div>
                        <div class="modal-body form-horizontal">
                            <div id="endorsement-form-container" class="">
                                <form class="form-horizontal" onsubmit="return checkalledit()" method="POST"
                                      action="{{ url_for("edit_tutor_profile", tutor_id = tutor[0]) }}">
                                    <div class="form-group">

                                        <div>
                                            <label for="firstnamevalue"><span style="color: red;">*</span> First Name:</label><br>
                                            {#                                            <input type="text" class="form-control" id="firstnamevalue">#}
                                            {#                                            <label for=>First Name:</label><br>#}
                                            <input type="text" class="form-control" id="firstnamevalue" name="firstname"
                                                   value="{{ tutor[3] }}"
                                                   placeholder="Edit your first name here" required/>
                                        </div>
                                        <div id="firstnamestatuses" style="margin-left: 5%;">
                                        </div>
                                        <div>
                                            <label for="lastnamevalue"><span style="color: red;">*</span> Last Name:</label><br>
                                            <input type="text" class="form-control" id="lastnamevalue" name="lastname"
                                                   value="{{ tutor[4] }}"
                                                   placeholder="Edit your last name here" required/>
                                        </div>
                                        <div id="lastnamestatuses" style="margin-left: 5%;">
                                        </div>
                                        <div>
                                            <label for="editdateofbirth"><span style=" color: red;">*</span> Date of birth:</label><br>
                                            <div>

                                                <input value="{{ birthdate.strftime('%d-%m-%Y') }}" style="margin-left: 5%;"
                                                       class="form-control" id="editdateofbirth" name="dateofbirth"
                                                       placeholder="DD-MM-YYYY" type="text" required/>

                                            </div>

                                        </div>
                                        <div id="dateofbirthstatuses" style="margin-left: 5%;">
                                        </div>
                                        <div>
                                            <label for="emailvalue"><span style="color: red;">*</span> Email:</label><br>
                                            <input type="text" class="form-control" id="emailvalue" name="email"
                                                   value="{{ tutor[11] }}"
                                                   placeholder="Edit your email here" required/>
                                        </div>
                                        <div id="emailvaluestatus" style="margin-left: 5%;">
                                        </div>
                                        <div>
                                            <label for="line">LINE ID:</label>


                                            <input type="text" class="form-control" id="line" name="line"
                                                   value="{{ tutor[7] }}"
                                                   placeholder="Edit your LINE ID here (OPTIONAL)">
                                        </div>
                                        <div>
                                            <label for="facebook">Facebook:</label>
                                            <input type="text" class="form-control" id="facebook" name="facebook"
                                                   value="{{ tutor[8] }}"
                                                   placeholder="Edit your facebook here (OPTIONAL)">
                                        </div>
                                        <div>
                                            <label for="phonenumber"><span style="color: red;">*</span> Telephone:</label><br>
                                            <input type="tel" class="form-control" id="phonenumber" name="phone"
                                                   value="{{ tutor[9] }}"
                                                   placeholder="Edit your telephone here" required/>
                                        </div>
                                        <div id="phonenumberstatus" style="margin-left: 5%;">
                                        </div>
                                        <div>
                                            <label for="info"><span style="color: red;">*</span> Information:</label><br>
                                            <textarea type="text" class="form-control" id="info" name="info"
                                                      placeholder="Edit your information here"
                                                      required/> {{ tutor[1] }} </textarea>
                                        </div>
                                        <div id="posstatus" style="margin-left: 5%;">
                                        </div>

                                        <div>
                                            <label for="detail"><span style="color: red;">*</span> Video Introduction:</label>
                                            <div id="youtubelinkinformation" style="color: #FF9900; margin-left: 5%;">
                                                Please copy the embed link by clicking button under the youtube video
                                                Share > Embed > Copy just the attribute in the src="" into this form.
                                            </div>
                                            <input type="text" class="form-control" id="detail" name="video_link"
                                                   value="{{ tutor[6] }}"
                                                   placeholder="Edit your video introduction here" required/>
                                        </div>
                                        <div id="detailstatus" style="margin-left: 5%;">
                                        </div>


                                    </div>
                                    <button type="submit" class="btn btn-success" style="margin-left: 2%;">Update
                                    </button>

                                </form>

                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->


            {#            Edit picture Dialog#}
            <div class="modal fade" id="editpicture" tabindex="-1" role="dialog" aria-labelledby="edit"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span
                                    class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                            <h4 class="modal-title custom_align" id="Heading">Edit Your Profile Picture</h4>
                        </div>
                        <form enctype="multipart/form-data" class="form-horizontal"
                              onsubmit="return checkuploadpicture()" method="POST"
                              action= {{ url_for('edit_tutor_picture', tutor_id = tutor[0]) }}>
                            <div style="text-align: center; width:100%" class="modal-body">
                                <div>
                                    <img id="img0" src="#" alt="" style="display: none; width:90%; height:90%;"/>
                                    <button id="buttonUpload" onclick="uploadFile()" type="button"
                                            class="btn btn-secondary btn-lg">
                                        +
                                    </button>
                                    <input id="input-image-3" name="input-image" type="file"
                                           class="btn btn-secondary btn-lg"
                                           onchange="readURL2(this) ;" accept="image/*"
                                           multiple style="display: none">
                                    <button id="changePicture" onclick="uploadFile()" type="button"
                                            class="btn btn-secondary btn-lg" style="display:  none; margin-top:2%">
                                    </button>


                                </div>
                            </div>
                            <div class="modal-footer ">
                                <button type="submit" class="btn btn-success" style="margin-left: 2%;">Update
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- End Grid -->
        </div>
        <!-- End Page Container -->
    </div>
    </div>
    </div>
    </body>

    <script src="/static/js/verificationNewPost.js"></script>
    <script src="/static/js/verificationNewTutor.js"></script>
    <script src="/static/js/verificationEditTutor.js"></script>
    <script>
        $(function () {
            $("#datepicker").datepicker();
            $("#datepicker2").datepicker();
        });
    </script>

{% endblock %}
